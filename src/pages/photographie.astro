---
import SectionsLayout from "../layouts/SectionsLayout.astro";

const PHOTOGRAPHIE_IMAGES = [
	"/images/Algarve, photo 01, from 2025.jpeg",
	"/images/Amedhabad, photo 01, from 2024.jpeg",
	"/images/Amedhabad, photo 02, from 2024.jpeg",
	"/images/Amedhabad, photo 03, from 2024.jpeg",
	"/images/Amedhabad, photo 04, from 2024.jpeg",
	"/images/Andalusia, photo 01, from 2025.jpeg",
	"/images/Andalusia, photo 02, from 2025.jpeg",
	"/images/New York, photo 01, from 2025.jpeg",
];

const SIZE_VARIANTS = [
	"is-base",
	"is-compact",
	"is-base",
	"is-wide",
	"is-compact",
	"is-base",
	"is-wide",
	"is-base",
];

const photos = PHOTOGRAPHIE_IMAGES.map((src, index) => {
	const filename = decodeURIComponent(src.split("/").pop() ?? "");
	const label = filename.replace(/\.(jpe?g|png|webp|heic)$/i, "");

	return {
		src,
		label,
		variant: SIZE_VARIANTS[index] ?? "is-base",
	};
});
---

<SectionsLayout title="photographie | isidoro pannitti architetto" section="photographie">
	<div class="gallery" aria-label="Photographie sequence">
		{
			photos.map((photo) => (
				<figure class:list={["preview", photo.variant]}>
					<img src={encodeURI(photo.src)} alt={photo.label} loading="eager" />
					<figcaption>{photo.label}</figcaption>
				</figure>
			))
		}
	</div>
</SectionsLayout>

<style>
	.gallery {
		display: flex;
		align-items: flex-start;
		flex-wrap: nowrap;
		gap: clamp(0.75rem, 1.8vw, 1.2rem);
		overflow-x: auto;
		overscroll-behavior-x: contain;
		scroll-snap-type: x mandatory;
		-webkit-overflow-scrolling: touch;
		padding-bottom: 0.45rem;
	}

	.preview {
		flex: 0 0 auto;
		margin: 0;
		display: grid;
		gap: 0.45rem;
		scroll-snap-align: start;
	}

	.preview img {
		display: block;
		width: 17rem;
		height: auto;
	}

	.preview.is-compact img {
		width: 15.4rem;
	}

	.preview.is-wide img {
		width: 18rem;
	}

	.preview figcaption {
		max-width: 100%;
		overflow-wrap: anywhere;
	}

	@media (max-width: 760px) {
		.preview img {
			width: 22rem;
		}

		.preview.is-compact img {
			width: 20rem;
		}

		.preview.is-wide img {
			width: 23.4rem;
		}
	}
</style>
